# 2FA Node React Project

This project demonstrates the integration of Two-Factor Authentication (2FA) in a web application built with Node.js (backend) and React (client-side).

## Project Structure

```
2fa-node-react/
├── backend/          # Node.js Backend for handling authentication and 2FA
└── client/           # React Frontend for user interface and 2FA interaction
```

## Prerequisites

- Node.js (>= v14.x)
- npm or yarn
- MongoDB (or any database you're using)
- Google Authenticator or any TOTP-supported app for 2FA

## Installation

### Step 1: Clone the repository
First, clone this repository to your local machine.

```bash
git clone https://github.com/your-username/2fa-node-react.git
cd 2fa-node-react
```

### Step 2: Set up Backend

1. Navigate to the backend directory:

   ```bash
   cd backend
   ```

2. Install the required dependencies:

   ```bash
   npm install
   ```

3. Configure your environment variables. Create a `.env` file in the `backend` folder with the following variables:

   ```
   MONGO_URI=mongodb://localhost:27017/your-database-name
   JWT_SECRET=your-jwt-secret-key
   TOTP_SECRET=your-totp-secret-key
   ```

4. Start the backend server:

   ```bash
   npm start
   ```

   This will run the backend on `http://localhost:5000` (or the port you specified).

### Step 3: Set up Frontend

1. Navigate to the client directory:

   ```bash
   cd ../client
   ```

2. Install the required dependencies:

   ```bash
   npm install
   ```

3. Create a `.env` file in the `client` folder with the following variable:

   ```
   REACT_APP_API_URL=http://localhost:5000
   ```

4. Start the frontend development server:

   ```bash
   npm start
   ```

   This will run the React frontend on `http://localhost:3000` (or the port you specified).

### Step 4: Implement Two-Factor Authentication (2FA)

#### Backend

1. **Install Dependencies**:
   Install the `speakeasy` package for TOTP generation and `qrcode` for generating QR codes for scanning in authenticator apps.

   ```bash
   npm install speakeasy qrcode
   ```

2. **Generate Secret**:
   When a user registers or opts for 2FA, generate a secret key using `speakeasy`.

3. **Verify Token**:
   Use `speakeasy` to verify the 2FA token sent from the frontend.

#### Frontend

1. **Prompt for 2FA Setup**:
   When a user opts to enable 2FA, provide a button to generate and display the QR code.

2. **Display QR Code**:
   Use a library like `qrcode.react` to render the QR code in the frontend for the user to scan with their 2FA app.

   ```bash
   npm install qrcode.react
   ```

3. **Token Input**:
   Prompt the user to input the 6-digit token generated by their 2FA app and send it to the backend for verification.

## Usage

1. **Login**:
   - Enter your username and password.
   - After successful login, you'll be prompted to enter the 6-digit code from your 2FA app.

2. **Setup 2FA**:
   - Go to your account settings.
   - Enable 2FA to receive a QR code to scan with Google Authenticator or another TOTP app.
   - Enter the 6-digit code from your app to complete setup.

3. **Disable 2FA**:
   - Go to your account settings and disable 2FA.

## Troubleshooting

- Ensure that your MongoDB server is running.
- If the frontend doesn't load, check if the `REACT_APP_API_URL` is correctly set.
- Ensure the TOTP app (Google Authenticator, etc.) is generating the correct code.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
